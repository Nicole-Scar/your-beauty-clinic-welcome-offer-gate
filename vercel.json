export default function handler(req, res) {
  console.log("ðŸŸ¢ ENTRY HIT");
  console.log("QUERY:", req.query);

  const { contactId, utm_source } = req.query;

  if (!contactId) {
    return res.status(302).setHeader(
      "Location",
      "https://yourbeautyclinic.bookedbeauty.co/your-beauty-clinic-welcome-offer-invalid-340971"
    ).end();
  }

  const qs = new URLSearchParams({ contactId });
  if (utm_source) qs.set("utm_source", utm_source);

  res.status(302).setHeader(
    "Location",
    `/api/validateOffer?${qs.toString()}`
  ).end();
}
